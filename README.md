# Security Camera Motion Detector

A Python application that detects motion in security camera footage and automatically exports video clips of detected motion events. **99% Generated by AI.**

## Usage

The application supports both **GUI mode** (graphical interface) and **CLI mode** (command line).

### GUI Mode

Run with the `--gui` flag to launch the graphical interface:

```bash
python main.py --gui
```

1. **Set Input Folder**: Browse to select the folder containing your MP4 video files

2. **Set Output Folder**: Choose where to save the exported motion clips

3. **Preview Video**: Select a video from the dropdown to preview it

4. **Draw Detection Area**: Click and drag on the video preview to draw a rectangle around the area you want to monitor for motion

5. **Configure Settings** (optional):
   - **Padding Before**: Seconds to include before motion is detected (default: 2s)
   - **Padding After**: Seconds to include after motion ends (default: 2s)
   - **Motion Sensitivity**: How sensitive the motion detection is (default: 0.01)

6. **Process Videos**: Click "Process All Videos" to start analyzing all videos in the input folder

7. **View Results**: Click "Open Output Folder" to see the exported clips

### CLI Mode

For batch processing without a graphical interface, use CLI mode with the `--roi` argument:

```bash
python main.py --roi X1,Y1,X2,Y2 [options]
```

#### Basic Usage

```bash
# Process all videos in the default input folder
python main.py --roi 100,100,500,400

# Process specific videos
python main.py --roi 100,100,500,400 --videos video1.mp4 video2.mp4

# Custom input/output folders
python main.py --roi 100,100,500,400 --input /path/to/videos --output /path/to/clips
```

#### CLI Options

| Option | Description | Default |
|--------|-------------|---------|
| `--gui` | Run in GUI mode | - |
| `--roi X1,Y1,X2,Y2` | Region of interest coordinates (required for CLI) | - |
| `-i, --input PATH` | Input folder containing videos | `./input_videos` |
| `-o, --output PATH` | Output folder for clips | `./output_clips` |
| `--videos FILE...` | Specific video files to process | All videos |
| `--threshold N` | Motion threshold (lower = more sensitive) | 25 |
| `--min-area N` | Minimum contour area | 500 |
| `--sensitivity F` | Motion sensitivity (0.0-1.0) | 0.01 |
| `--frame-skip N` | Process every Nth frame | 2 |
| `--padding-before SEC` | Seconds before motion | 2 |
| `--padding-after SEC` | Seconds after motion | 2 |
| `--merge-gap SEC` | Gap to merge segments | 10 |

#### CLI Examples

```bash
# Process videos with custom input and output directories
python main.py --roi 100,100,500,400 --input D:\SecurityCam\recordings --output D:\SecurityCam\motion_clips

# High sensitivity with more padding
python main.py --roi 100,100,500,400 --threshold 15 --sensitivity 0.005 --padding-before 5 --padding-after 5

# Fast processing (skip more frames)
python main.py --roi 100,100,500,400 --frame-skip 5

# Full example with all common options
python main.py --roi 200,150,800,500 -i D:\Videos\input -o D:\Videos\output --threshold 20 --padding-before 3 --padding-after 3 --merge-gap 15

# Show help
python main.py --help
```

## Configuration

You can modify `config.py` to change default settings:

- `INPUT_FOLDER`: Default input directory
- `OUTPUT_FOLDER`: Default output directory
- `MOTION_THRESHOLD`: Sensitivity of motion detection (lower = more sensitive)
- `MIN_CONTOUR_AREA`: Minimum size of motion area to detect
- `MOTION_SENSITIVITY`: Percentage of area that needs to change
- `PADDING_BEFORE_SECONDS`: Seconds before motion to include
- `PADDING_AFTER_SECONDS`: Seconds after motion to include
- `FRAME_SKIP`: Process every Nth frame (higher = faster but less accurate)

## Supported Video Formats

- MP4
- AVI
- MOV
- MKV

## License

MIT License
